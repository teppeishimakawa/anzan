

<!DOCTYPE html>
<html lang="ja">
<head>
<link href="./style.css" rel="stylesheet" type="text/css"/>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
<title>anzan</title>
<style>
</style>
</head>




<body oncontextmenu='return false;' oncopy='return false;'>
<!--user-select:none,oncontextmenu='return false;' oncopy='return false;'重要！ボタン文字が選択状態になってしまう。-->
<div class="order_all">
<div class="order" id="order_num" style="visibility: hidden;"></div>
<div id="order_comment"></div>
</div>

<!--div id="ans"  style='position: fixed;top: 5%; right:calc(50% - 100px);  width:200px;height:70px;text-align:center;font-size: 60px;color: black'></div-->

<div id="time"  style='position: fixed;top: 5%; right:0%;  width:200px;height:70px;text-align:center;font-size: 25px;color: black'></div>
<div id="score" style='position: fixed;top: 20%;right:10%; width:200px;height:70px;text-align: right;font-size: 25px;color: black'></div>

<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="key_all">
  <div>
  <button  class="key green" id="seven" value="7" onclick="edit(this)" ontouchstart="">7</button>
  <button  class="key green" id="eight" value="8" onclick="edit(this)" ontouchstart="">8</button>
  <button  class="key green" id="nine" value="9" onclick="edit(this)" ontouchstart="">9</button>
  </div>
  <div>
  <button  class="key green" id="four" value="4" onclick="edit(this)" ontouchstart="">4</button>
  <button  class="key green" id="five" value="5" onclick="edit(this)" ontouchstart="">5</button>
  <button class="key green" id="six" value="6" onclick="edit(this)" ontouchstart="">6</button>
  </div>
  <div>
  <button class="key green" id="one" value="1" onclick="edit(this)" ontouchstart="">1</button>
  <button class="key green" id="two" value="2" onclick="edit(this)" ontouchstart="">2</button>
  <button class="key green" id="three" value="3" onclick="edit(this)" ontouchstart="">3</button>
  </div>
  <div>
  <button class="key green" id="zero" value="0" onclick="edit(this)" ontouchstart="">0</button>
  </div>
  <br>
  <br>
  <div>
  <button class="green" id="enter" onclick="result()" ontouchstart="">enter</button>
  </div>
</div>

<br>
<br>
<div class="btn_all">
    <button class="green" id="stt">start</button>
    <button class="green" id="reload">reload</button>
</div>


<script>

/*
function isMobile()
{
  const isAndroid = /Android/i.test(navigator.userAgent);
  const isiOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
  return isAndroid || isiOS;
}

const mobile = isMobile();
*/


var flg=0;
var cnt=0;
var PassSec;
var PassageID;
var msg;


var num_arr1=[0,1,2,3,4,5,6,7,8,9]
var num_arr2=[0,1,2,3,4,5,6,7,8,9]
var comment_arr=["&nbsp;&nbsp;&nbsp;足して！","&nbsp;&nbsp;&nbsp;足して！","&nbsp;&nbsp;&nbsp;掛けて！"]
//↓配列の値に四則演算子を使うとエラー出たため。
var kigou=["+","+","*"]



var zero=document.getElementById("zero");
var one=document.getElementById("one");
var two=document.getElementById("two");
var three=document.getElementById("three");
var four=document.getElementById("four");
var five=document.getElementById("five");
var six=document.getElementById("six");
var seven=document.getElementById("seven");
var eigjt=document.getElementById("eight");
var nine=document.getElementById("nine");

var random1=Math.floor(Math.random()*10)
var random1_2=Math.floor(Math.random()*10)
var random2=Math.floor(Math.random()*3)

var order_num = document.getElementById("order_num");






    function edit(elem)
    {
      order_num.innerHTML = order_num.innerHTML + elem.value;
            if(order_num.innerHTML == (  Math.abs(new Function("return " + num_arr1[random1] + kigou[random2] + num_arr2[random1_2])())  ))
       {
        document.getElementById("enter").className = 'green'
       }else{document.getElementById("enter").className = 'red';}
    }

    function result()
    {
      console.log(random2);
      console.log(num_arr1[random1] + kigou[random2] + num_arr2[random1_2])
      //ans.innerHTML = new Function("return " + ans.innerHTML)();
      if(order_num.innerHTML == (  Math.abs(new Function("return " + num_arr1[random1] + kigou[random2] + num_arr2[random1_2])())  ))
       {
        next();
       }else{NGnext()}
    }


　　　　　

　　　　　function showPassage()
　　　　　{
   　　　 PassSec++;
   　　　 msg = 29 - (Math.floor(PassSec/100)) + ":" +  ( '00' + (100 - PassSec%100)).slice( -2 );   // 表示文作成
   　　   document.getElementById("time").innerHTML = msg;
         endChk();
　　　　　}

　　　　　function startShowing()
　　　　　{
   　　　　PassSec = 0;
   　　　　PassageID = setInterval(showPassage,10);
　　　　　}

        function stopShowing()
        {
        clearInterval(PassageID);
        }



function endChk()
{
 if( (PassSec/100) >= 30)
  {
   stopShowing();
   document.getElementById("time").innerHTML="0:00";
   document.getElementById("score").style.color="red";

   document.getElementById("enter").style.pointerEvents="none"
   document.getElementById("order_num").style.display="none";
   document.getElementById("order_comment").style.display="none";
   //document.getElementById("ans").style.display="none";

  }
}






document.getElementById("stt").addEventListener("click", () =>
{
  if(flg == 0)
    {
      startShowing();
      document.getElementById("stt").disabled=true;
      flg=1;

      document.getElementById("order_num").style.visibility="visible";
      document.getElementById("order_num").innerHTML=num_arr1[random1];
      setTimeout(function(){document.getElementById("order_num").innerHTML="";},500)
      setTimeout(function(){document.getElementById("order_num").innerHTML=num_arr2[random1_2];},1000)
      setTimeout(function(){document.getElementById("order_num").innerHTML="";},1500)
      document.getElementById("order_comment").innerHTML=comment_arr[random2];

      document.getElementById("enter").style.pointerEvents="auto"


    }else
    {

    }
});



document.getElementById("reload").onclick=function(){location.reload()}


//random1 0:gu,1:cho,2:pa
//random2 0:勝ち,1:負け,2:引き分け





function color()
{
      if(order_num.innerHTML == (  Math.abs(new Function("return " + num_arr1[random1] + kigou[random2] + num_arr2[random1_2])())  ))
       {
        document.getElementById("enter").className = 'green'
       }else{document.getElementById("enter").className = 'red'}
}


function next()
{
   cnt++
   document.getElementById("score").innerHTML=cnt;
   random1=Math.floor(Math.random()*10)
   random1_2=Math.floor(Math.random()*10)
   random2=Math.floor(Math.random()*3)
   document.getElementById("order_num").innerHTML="ok!";
   document.getElementById("order_comment").innerHTML="";
      setTimeout(function(){document.getElementById("order_num").innerHTML="";},500)
      setTimeout(function(){document.getElementById("order_num").innerHTML=num_arr1[random1];},1000)
      setTimeout(function(){document.getElementById("order_num").innerHTML="";},1500)
      setTimeout(function(){document.getElementById("order_num").innerHTML=num_arr2[random1_2];},2000)
      setTimeout(function(){document.getElementById("order_num").innerHTML="";},2500)
      setTimeout(function(){document.getElementById("order_comment").innerHTML=comment_arr[random2];},1000)



}


function NGnext()
{
   cnt--;
   document.getElementById("score").innerHTML=cnt;
   random1=Math.floor(Math.random()*10)
   random1_2=Math.floor(Math.random()*10)
   random2=Math.floor(Math.random()*3)
   document.getElementById("order_num").style.color="red"
   document.getElementById("order_num").innerHTML="NG...";
   document.getElementById("order_comment").innerHTML="";
      setTimeout(function(){document.getElementById("order_num").innerHTML="";},500)
      setTimeout(function()
        {
         document.getElementById("order_num").innerHTML=num_arr1[random1]
         document.getElementById("order_num").style.color="black";
        },1000)
      setTimeout(function(){document.getElementById("order_num").innerHTML="";},1500)
      setTimeout(function(){document.getElementById("order_num").innerHTML=num_arr2[random1_2];},2000)
      setTimeout(function(){document.getElementById("order_num").innerHTML="";},2500)

      setTimeout(function(){document.getElementById("order_comment").innerHTML=comment_arr[random2];},1000)


}





</script>



</body>
</html>